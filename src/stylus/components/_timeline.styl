@import '../bootstrap'
@import '../theme'

v-timeline($material)
  &:before
    background: $material.dividers

  .v-timeline-item
    &__dot
      background: $material.cards

    .v-card
      &:before
        border-right-color: $shadow-key-ambient-opacity

theme(v-timeline, "v-timeline")

.v-timeline
  padding-top: 24px
  position: relative

  &:before
    bottom: 0
    content: ''
    height: 100%
    left: calc(50% - 1px)
    position: absolute
    top: 0
    width: 2px

  .v-timeline-item
    display: flex
    flex-direction: row-reverse
    padding-bottom: 24px

    &:nth-child(odd):not(.v-timeline-item--right), &--left
      flex-direction: row

      .v-card:before, .v-card:after
        transform: rotate(180deg)
        left: 100%

      .v-timeline-item__opposite
        margin-left: 96px
        text-align: left

    &:nth-child(even):not(.v-timeline-item--left), &--right
      .v-card:before, .v-card:after
        right: 100%

      .v-timeline-item__opposite
        margin-right: 96px
        text-align: right

    &__dot
      elevation(1)

      position: absolute
      align-self: center
      border-radius: 50%
      width: 38px
      height: 38px
      left: calc(50% - 19px)

      &--small
        width: 24px
        height: 24px
        left: calc(50% - 12px)

        .v-timeline-item__inner-dot
          margin: 3px
          width: 18px
          height: 18px

    &__inner-dot
      margin: 4px
      display: flex
      justify-content: center
      align-items: center
      border-radius: 50%
      width: 30px
      height: 30px

    &__body
      position: relative
      height: 100%
      flex: 1 1 100%
      max-width: calc(50% - 48px)

    .v-card
      &:before, &:after
        content: ''
        position: absolute
        border-top: $timeline-wedge-size solid transparent
        border-bottom: $timeline-wedge-size solid transparent
        border-right: $timeline-wedge-size solid black
        top: 'calc(50% - %s)' % $timeline-wedge-size

      &:after
        border-right-color: inherit

      &:before
        top: 'calc(50% - %s + 2px)' % $timeline-wedge-size

    &__opposite
      flex: 1 1 auto
      align-self: center
      max-width: calc(50% - 48px)

  &--dense
    &:before
      left: 18px // -1 for line width

    .v-timeline-item
      &:nth-child(odd):not(.v-timeline-item--right), &--left
        flex-direction: row-reverse

        .v-card
          &:before, &:after
            right: initial
            left: -($timeline-wedge-size)
            transform: none

      &__dot
        left: 0

      &__dot--small
        left: 7px // -1 for line width

      &__body
        max-width: calc(100% - 64px)

      &__opposite
        display: none
